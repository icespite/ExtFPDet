"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[684],{7627:function(e,t,n){n.d(t,{e:function(){return p},y:function(){return f}});var r=n(7667),c=n(4370),o=n(1619),i=n.n(o),a=n(7399),u=n(1853),s=(0,n(391).default)().publicRuntimeConfig,l=n(348),p=(0,r.createContext)(void 0),f=function(e){var t=e.children,n=function(e){var t=e.pageConfig,n=e.pageContent,o=e.pageMetadata,l=(0,r.useState)([]),p=l[0],f=l[1],d=(0,r.useState)(!1),m=d[0],v=d[1];return(0,r.useEffect)((function(){o.recommendationsSessionId&&(0,u.t)().then((function(e){return(0,a.g6)({apiKey:s.RICH_RELEVANCE_API_KEY,env:"production",hasDisabledCookies:!o.functionalCookiesConsented,sessionId:o.recommendationsSessionId,userId:null===e||void 0===e?void 0:e.sub})})).then((0,c.Z)(i().mark((function e(){var r,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("homepage"===t.contentType?(0,a.qk)():n.departmentId&&(0,a.E8)(n.departmentId),o=n.sections,!(r=o.map((function(e){return e.props.placementType})).filter((function(e){return!!e}))).length){e.next=9;break}return e.next=5,(0,a.$K)(r);case 5:c=e.sent,f(c),e.next=10;break;case 9:(0,a.lX)();case 10:case"end":return e.stop()}var o}),e)})))).catch((function(e){console.warn("Could not load recommendations on ".concat(t.contentType,": ").concat(e.message))})).finally((function(){v(!0)}))}),[]),{getPlacementData:function(e){return p.find((function(t){return t.placement_name===e}))||null},loaded:m}}({pageConfig:e.pageConfig,pageContent:e.pageContent,pageMetadata:e.pageMetadata});return(0,l.jsx)(p.Provider,{value:n,children:t})}},8796:function(e,t,n){n.d(t,{S:function(){return m}});var r=n(2492),c=n(3390),o=n.n(c),i=n(7667),a=n.n(i),u=n(9654),s=n(5302),l=n(9130),p=n(348),f=o()("div").withConfig({displayName:"SectionContainer___StyledDiv",componentId:"y77chx-0"})(["",""],(function(e){return e._css})),d=o()("div").withConfig({displayName:"SectionContainer___StyledDiv2",componentId:"y77chx-1"})(["",""],(function(e){return e._css2})),m=a().forwardRef((function(e,t){var n=e.children,o=e.maxWidth,i=e.wrapperStyles,a=e.columnsXS,m=e.columnsS,v=e.columnsM,g=e.columnsL,y=e.columnsXL,b={XXS:u.BW,XS:a,S:m,M:v,L:g,XL:y},O=Object.keys(b).filter((function(e){return b[e]})).map((function(e){return(0,c.css)(["",""],(0,l.c)({min:s.Ri[e]},(0,c.css)(["grid-column:"," / span ",";"],(t=b[e],(u.BW-t)/2+1),b[e])));var t})),_=(0,p.jsx)(f,{ref:t,_css:[i].concat((0,r.Z)(O)),children:n});return o?(0,p.jsx)(d,{_css2:[u.eC,"full"===o?u.wf:u.K9],children:_}):_}))},3068:function(e,t,n){n.d(t,{S:function(){return r.S}});var r=n(8796)},7684:function(e,t,n){n.r(t),n.d(t,{ProductCarouselRecommendationsSection:function(){return X}});var r=n(3214),c=n(5779),o=n(7667),i=["new","on_sale","sale_percentage","prices","free_domestic_delivery"];function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var u=function(e,t){var n=e.new,o=e.on_sale,u=e.sale_percentage,s=e.prices,l=e.free_domestic_delivery,p=(0,c.Z)(e,i);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({isNew:n,onSale:o,salePercentage:u,freeDomesticDelivery:l,price:s.find((function(e){return e.currency===t}))},p)},s=n(8953),l=n(97),p=n(3068),f=n(6141),d=n(9353),m=n(4370),v=n(1619),g=n.n(v),y=n(5837),b=n(944),O=n(7428),_=n.n(O),h=(0,n(391).default)().publicRuntimeConfig.RECOMMENDED_PRODUCTS_API_URL,P=function(){var e=(0,m.Z)(g().mark((function e(t){var n,r,c,o;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.join("&ids[]="),e.prev=1,e.next=4,_()("".concat(h,"?ids[]=").concat(n));case 4:return r=e.sent,e.next=7,(0,b.HV)(r);case 7:if(e.t0=e.sent,e.t0){e.next=10;break}e.t0={};case 10:return c=e.t0,o=c.products,e.abrupt("return",o);case 15:e.prev=15,e.t1=e.catch(1),console.error("error in fetchRecommendedProducts: ".concat(String(e.t1)));case 18:return e.abrupt("return",null);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}();function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=function(e,t){return t.reduce((function(t,n){var r=e.find((function(e){var t=e.code;return(0,y.B)(t)===Number(n.id)}));return r&&t.push(k(k({},n),{},{product:r})),t}),[])},C=n(348),S=function(e){var t=e.currency,n=e.items,r=void 0===n?[]:n,c=e.onNavigateCarousel,i=e.placementTitle,a=void 0===i?"":i,u=e.strategy,s=void 0===u?"":u,l=e.onVisible,p=e.onProductClick,v=function(e){var t=(0,o.useState)([]),n=t[0],r=t[1],c=(0,o.useState)(!1),i=c[0],a=c[1];return(0,o.useEffect)((function(){!function(){var t=(0,m.Z)(g().mark((function t(){var n,c;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.length>0)){t.next=10;break}return n=e.map((function(e){return e.id})),t.next=4,P(n);case 4:if(t.t0=t.sent,t.t0){t.next=7;break}t.t0=[];case 7:c=t.t0,r(c),a(!0);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[e]),[j(n,e),i]}(r),y=(0,f.Z)(v,2),b=y[0],O=y[1],_=(null===b||void 0===b?void 0:b.length)>0;return!O||O&&_?(0,C.jsx)("div",{"data-testid":"ProductCarouselWithRecommendationsServiceDataTestId",children:(0,C.jsx)(d.G,{isLoading:!_,products:b.map((function(e){return function(e,t,n){var r,c,o=e.title,i=e.images,a=e.links,u=e.purchasable,s=e.new,l=e.on_sale,p=e.prices,f=e.sale_percentage,d=e.pre_sale_prices;return{title:o,src:(null===(r=i[0])||void 0===r?void 0:r.href)||"",href:(null===(c=a[0])||void 0===c?void 0:c.href)||"",alt:"",isNew:s,onSale:l,isPurchasable:u,price:null===p||void 0===p?void 0:p.find((function(e){return e.currency===t})),preSalePrice:null===d||void 0===d?void 0:d.find((function(e){return e.currency===t})),salePercentage:null!==f&&void 0!==f?f:void 0,trackingURL:n}}(e.product,t,e.linkURL)})),title:a,onVisible:function(){var e=b.map((function(e){return e.product}));null===l||void 0===l||l({products:e,strategy:s})},onNavigation:function(e,t){null===c||void 0===c||c(e,t,{numberOfItems:b.length,strategy:s})},onProductClick:function(e,t){var n=t.index;null===p||void 0===p||p(e,{product:b[n].product,recommendationsTrackingUrl:b[n].linkURL,index:n,numberOfItems:b.length,strategy:s})}})}):null},x=n(7627),D=function(e){var t=e.currency,n=e.onNavigateCarousel,r=e.onVisible,c=e.onProductClick,i=e.placementType,a=(0,o.useContext)(x.e),u=a.getPlacementData,s=a.loaded,l=u(i),p=null===l||void 0===l?void 0:l.items,f=p&&p.length>0;return!s||s&&f?(0,C.jsx)(S,{currency:t,items:p,onNavigateCarousel:n,onVisible:r,onProductClick:c,placementTitle:null===l||void 0===l?void 0:l.message,strategy:null===l||void 0===l?void 0:l.strategy}):null},T=n(2171),I=n(6542),L=n(3390),E=T.rS.spacing,N=(0,L.css)(["margin:",";"],(0,I.k)(E.xxxl)),R=["trackingPosition","placementType","currency"];function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X=function(e){var t=e.trackingPosition,n=e.placementType,r=e.currency,o=(0,c.Z)(e,R),i={trackingContentType:"Rich Relevance",trackingPosition:t};return(0,C.jsx)(p.S,{wrapperStyles:N,maxWidth:"max",columnsXL:10,children:(0,C.jsx)(D,U({currency:r,placementType:n,onVisible:function(e){var t=e.products,c=e.strategy;(0,l.z)(U(U({},i),{},{products:t.map((function(e){return u(e,r)})),trackingTitle:"".concat(c," : ").concat(n)}))},onNavigateCarousel:function(e,t,r){var c=r.numberOfItems,o=r.strategy,a="next"===t?"next":"previous";(0,s.P)(e,a,U(U({},i),{},{numberOfItems:c,trackingTitle:"".concat(o," : ").concat(n)}))},onProductClick:function(e,t){var c=t.product,o=t.index,a=t.numberOfItems,s=t.strategy,p=t.recommendationsTrackingUrl;(0,l.C)(e,U(U({},i),{},{recommendationsTrackingUrl:p,product:u(c,r),productIndex:o,numberOfItems:a,trackingTitle:"".concat(s," : ").concat(n)}))}},o))})}},8953:function(e,t,n){n.d(t,{P:function(){return c}});var r=n(8431),c=function(e,t,n){var c=n.trackingContentType,o=n.trackingPosition,i=n.trackingTitle,a=n.numberOfItems,u=e?"Swipe":"Arrow click";(0,r.N)({event:"custom_event",event_action:"".concat(u," ").concat(t),event_category:"".concat(o," | ").concat(c),event_label:"".concat(o," | ").concat(i," | ").concat(a).toLowerCase(),event_name:"content_interaction",event_details:"".concat(u," ").concat(t).toLowerCase(),content_position:"".concat(o),content_type:"".concat(c,"|").concat(i).toLowerCase(),total_options:"".concat(a)})}},97:function(e,t,n){n.d(t,{z:function(){return l},C:function(){return p}});var r=n(3214),c=n(8431),o=n(2701),i=n(5837);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s=function(e,t,n){var r=e.code,c=e.freeDomesticDelivery,o=e.isNew,a=e.onSale,s=e.salePercentage,l=e.partner,p=e.price,f=e.purchasable,d=e.title,m=String(p.amount/100),v=[c&&"free uk delivery",o&&"new",a&&!!s&&"-".concat(s,"% off"),!f&&"out of stock"].filter(Boolean).join(", "),g=t+1;return u(u({name:d,id:String((0,i.B)(r)),dimension22:v,dimension25:g,dimension30:String(r),dimension31:m,price:m,dimension32:m,dimension33:a?"".concat(s,".0%"):"none",brand:l.name,dimension34:l.shortcode,position:g},n&&{list:n}),{},{dimension16:"not set"})},l=function(e){var t=e.trackingContentType,n=e.pageType,r=void 0===n?"":n,o=e.products,i=e.trackingPosition,a=e.trackingTitle,u=o.length,l="".concat(r&&r+" - ").concat(a).toLowerCase();(0,c.N)({ecommerce:null}),(0,c.N)({event:"product_impressions",event_category:"".concat(i," | ").concat(t),event_action:"Product Impressions",event_label:"".concat(i," | ").concat(a).toLowerCase(),event_name:"view_item_list",content_position:"".concat(i),content_type:"".concat(t,"|").concat(a).toLowerCase(),total_options:"".concat(u),ecommerce:{impressions:o.map((function(e,t){return s(e,t,l)}))}})},p=function(e,t){var n=t.trackingContentType,r=t.numberOfItems,i=t.pageType,a=void 0===i?"":i,l=t.product,p=t.productIndex,f=t.trackingPosition,d=t.trackingTitle,m=t.recommendationsTrackingUrl;(0,c.N)({ecommerce:null}),(0,o.K)(e,u(u({event:"product_clicks",event_category:"".concat(f," | ").concat(n),event_action:"Product Click",event_label:"".concat(f," | ").concat(d).toLowerCase()},m&&{algonomy_tracking_URL:"".concat(m)}),{},{event_name:"select_item",content_position:"".concat(f),content_type:"".concat(n,"|").concat(d).toLowerCase(),total_options:"".concat(r),selected_position:"".concat(p+1),item_id:l.code.toString(),ecommerce:{click:{actionField:{list:"".concat(a&&a+" - ").concat(d).toLowerCase()},products:[s(l,p)]}}}))}}}]);
//# sourceMappingURL=684.3c8000e6efd96d65.js.map